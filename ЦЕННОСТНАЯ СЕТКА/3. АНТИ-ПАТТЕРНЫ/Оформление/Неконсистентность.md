#–æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ
***

> [!cite] –û–ø–∏—Å–∞–Ω–∏–µ
>_–û—Ñ–æ—Ä–º–ª—è—è —Å–≤–æ–π –∫–æ–¥ –∏–ª–∏ —Ç–µ–∫—Å—Ç, —Å–ª–µ–¥—É–µ—Ç –ø—Ä–∏–¥–µ—Ä–∂–∏–≤–∞—Ç—å—Å—è –µ–¥–∏–Ω—ã—Ö –ø—Ä–∞–≤–∏–ª, —á—Ç–æ–±—ã –Ω–µ —Å–æ–∑–¥–∞–≤–∞—Ç—å –ª–∏—à–Ω–∏—Ö –≤–æ–ø—Ä–æ—Å–æ–≤ —É —á–∏—Ç–∞—Ç–µ–ª—è. –í—ã–±–æ—Ä –ø—Ä–∞–≤–∏–ª –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –º–æ–∂–µ—Ç –±—ã—Ç—å –≥–∏–±–∫–∏–º, –Ω–æ —Å–ª–µ–¥–æ–≤–∞—Ç—å –∏–º –Ω—É–∂–Ω–æ —Ç–≤—ë—Ä–¥–æ, –∏–Ω–∞—á–µ –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–µ–≤–æ–ª—å–Ω–æ –±—É–¥–µ—Ç —Å–ø–æ—Ç—ã–∫–∞—Ç—å—Å—è –æ —Ç–æ, –∫–∞–∫ –≤ —Å—Ö–æ–∂–∏—Ö —Å–∏—Ç—É–∞—Ü–∏—è—Ö –≤—ã–ª–µ–∑–∞—é—Ç —Ä–∞–∑–Ω—ã–µ —Å–ø–æ—Å–æ–±—ã —Ä–µ—à–µ–Ω–∏—è._

***
### üí° –ü—Ä–∏–º–µ—Ä 1
–í—Å–µ–≥–¥–∞ –æ–±—Ä–∞—â–∞–π—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ –∑–∞–∫—Ä—ã–≤–∞—é—â–∏–µ –∑–∞–ø—è—Ç—ã–µ –∏ —Å–∫–æ–±–∫–∏.

**–ü–ª–æ—Ö–æ:**
```python
if not advance_amount and not advance_percent:
	raise ValidationError(
		'–í–≤–µ–¥–µ–Ω—ã –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –¥–ª—è –ø–æ–ª–µ–π '
		'"–†–∞–∑–º–µ—Ä –∞–≤–∞–Ω—Å–∞ –≤ –ø—Ä–æ—Ü–µ–Ω—Ç–∞—Ö" –∏ "–†–∞–∑–º–µ—Ä –∞–≤–∞–Ω—Å–∞, —Ä—É–±.". '
		'–°–±—Ä–æ—Å–∏—Ç—å –æ–±–∞ –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ–ª—è –º–æ–∂–Ω–æ —É–±—Ä–∞–≤ –≥–∞–ª–æ—á–∫—É —Å –ø–æ–ª—è "–ê–≤–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–∏–µ".')
elif advance_amount > initial_contract_price:
	raise ValidationError(
		'–ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ–ª—è "–†–∞–∑–º–µ—Ä –∞–≤–∞–Ω—Å–∞, —Ä—É–±." –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –±–æ–ª—å—à–µ'
		'–∑–Ω–∞—á–µ–Ω–∏—è –ø–æ–ª—è "–ù–∞—á–∞–ª—å–Ω–∞—è (–º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è) —Ü–µ–Ω–∞ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞, —Ä—É–±."',
	)
```

**–•–æ—Ä–æ—à–æ:**
```python
if not advance_amount and not advance_percent:
	raise ValidationError(
		'–í–≤–µ–¥–µ–Ω—ã –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –¥–ª—è –ø–æ–ª–µ–π '
		'"–†–∞–∑–º–µ—Ä –∞–≤–∞–Ω—Å–∞ –≤ –ø—Ä–æ—Ü–µ–Ω—Ç–∞—Ö" –∏ "–†–∞–∑–º–µ—Ä –∞–≤–∞–Ω—Å–∞, —Ä—É–±.". '
		'–°–±—Ä–æ—Å–∏—Ç—å –æ–±–∞ –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ–ª—è –º–æ–∂–Ω–æ —É–±—Ä–∞–≤ –≥–∞–ª–æ—á–∫—É —Å –ø–æ–ª—è "–ê–≤–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–∏–µ".'
	)
elif advance_amount > initial_contract_price:
	raise ValidationError(
		'–ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ–ª—è "–†–∞–∑–º–µ—Ä –∞–≤–∞–Ω—Å–∞, —Ä—É–±." –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –±–æ–ª—å—à–µ'
		'–∑–Ω–∞—á–µ–Ω–∏—è –ø–æ–ª—è "–ù–∞—á–∞–ª—å–Ω–∞—è (–º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è) —Ü–µ–Ω–∞ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞, —Ä—É–±."'
	)
```

***
### üí° –ü—Ä–∏–º–µ—Ä 2
–í—Å–µ–≥–¥–∞ –æ–±—Ä–∞—â–∞–π—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ –∑–∞–∫—Ä—ã–≤–∞—é—â–∏–µ –∑–∞–ø—è—Ç—ã–µ –∏ —Å–∫–æ–±–∫–∏.

**–ü–ª–æ—Ö–æ:**
```python
if set_is_advance(is_advance, cleaned_data):
	return cleaned_data
elif 'advance_percent' in self.changed_data and 'advance_amount' not in self.changed_data:
	set_advance_if_advance_percent_change(
		initial_advance_percent, advance_amount, advance_percent, initial_contract_price, cleaned_data
	)
elif 'advance_amount' in self.changed_data and 'advance_percent' not in self.changed_data:
	set_advance_if_advance_amount_change(
		initial_advance_amount, advance_amount, advance_percent, initial_contract_price, cleaned_data)
```

**–•–æ—Ä–æ—à–æ:**
```python
if set_is_advance(is_advance, cleaned_data):
	return cleaned_data
elif 'advance_percent' in self.changed_data and 'advance_amount' not in self.changed_data:
	set_advance_if_advance_percent_change(
		initial_advance_percent, advance_amount, advance_percent, initial_contract_price, cleaned_data,
	)
elif 'advance_amount' in self.changed_data and 'advance_percent' not in self.changed_data:
	set_advance_if_advance_amount_change(
		initial_advance_amount, advance_amount, advance_percent, initial_contract_price, cleaned_data,
	)
```

**–•–æ—Ä–æ—à–æ:**
```python
if set_is_advance(is_advance, cleaned_data):
	return cleaned_data
elif 'advance_percent' in self.changed_data and 'advance_amount' not in self.changed_data:
	set_advance_if_advance_percent_change(
		initial_advance_percent, advance_amount, advance_percent, initial_contract_price, cleaned_data)
elif 'advance_amount' in self.changed_data and 'advance_percent' not in self.changed_data:
	set_advance_if_advance_amount_change(
		initial_advance_amount, advance_amount, advance_percent, initial_contract_price, cleaned_data)
```

***
### üí° –ü—Ä–∏–º–µ—Ä 3
–ï—Å–ª–∏ –ø—Ä–∏–Ω—è—Ç–æ —Ä–µ—à–µ–Ω–∏–µ —Ä–∞–∑–Ω–æ—Å–∏—Ç—å –∞—Ä–≥—É–º–µ–Ω—Ç—ã –∏–ª–∏ —ç–ª–µ–º–µ–Ω—Ç—ã –∫–æ–ª–ª–µ–∫—Ü–∏–∏ –ø–æ —Å—Ç—Ä–æ–∫–∞–º, –∫–∞–∂–¥—ã–π –∏–∑ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –æ—Ñ–æ—Ä–º–ª–µ–Ω –ø–æ –µ–¥–∏–Ω—ã–º –ø—Ä–∞–≤–∏–ª–∞–º.

**–ü–ª–æ—Ö–æ:**
```python
@pytest.mark.parametrize('input_data, expected', [
	((True, True, 13, 500, 1000), (13, 130)),
	((True, True, None, 500, 1000), (None, None)),
	((True, True, 13, None, 1000), (13, 130)),
])
```

**–•–æ—Ä–æ—à–æ:**
```python
@pytest.mark.parametrize(
	'input_data, expected',
	[
		((True, True, 13, 500, 1000), (13, 130)),
		((True, True, None, 500, 1000), (None, None)),
		((True, True, 13, None, 1000), (13, 130)),
	],
)
```

***

> [!example] –°–≤—è–∑–∞–Ω–Ω—ã–µ –∫–µ–π—Å—ã
>- –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å: [[SOURCE CODE PY]]
>	- –§—É–Ω–∫—Ü–∏—è: [[SOURCE CODE PY#ùëì –ë–µ–≥–ª–æ –ø—Ä–æ—Å–ª–µ–¥–∏—Ç—å –ø–æ—Ç–æ–∫ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è –ø—Ä–æ–≥—Ä–∞–º–º—ã|–ë–µ–≥–ª–æ –ø—Ä–æ—Å–ª–µ–¥–∏—Ç—å –ø–æ—Ç–æ–∫ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è –ø—Ä–æ–≥—Ä–∞–º–º—ã]]

***

> [!info]
> –ï—Å–ª–∏ –Ω–µ —É–¥–∞–ª–æ—Å—å –Ω–∞–π—Ç–∏ –Ω–∏—á–µ–≥–æ –ø–æ–¥—Ö–æ–¥—è—â–µ–≥–æ –∏–ª–∏ –µ—Å—Ç—å –∏–¥–µ—è –ø–æ —É–ª—É—á—à–µ–Ω–∏—é, [[–ö–æ–Ω—Ç–∞–∫—Ç—ã|–ø–∏—à–∏ —Å—é–¥–∞]].
